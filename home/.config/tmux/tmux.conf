# Default shell
set-option -g default-shell /bin/zsh

# Better prefix key (Ctrl+a instead of Ctrl+b)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Enable mouse support
set -g mouse on

# Better splitting shortcuts
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Vim-style pane navigation (with prefix)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Seamless nvim/tmux navigation (C-hjkl without prefix)
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
is_vim_or_claude="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?|claude)(diff)?$'"
bind-key -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind-key -n C-j if-shell "$is_vim_or_claude" "send-keys C-j" "select-pane -D"
bind-key -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind-key -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"

# Quick window switching with Ctrl+a+a
bind a last-window

# Sesh session picker (Ctrl+a+s)
bind-key "s" run-shell "sesh connect \"$(sesh list | fzf-tmux -p 55%,60% --no-sort --border-label ' sesh ')\""

# Reload config
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded!"

# Better colors
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Status bar styling
set -g status-style "bg=#1e1e2e,fg=#cdd6f4"
set -g status-left-length 50
set -g status-right-length 100

# Left: session name
set -g status-left "#[fg=#1e1e2e,bg=#89b4fa,bold] #S #[fg=#89b4fa,bg=#1e1e2e]"

# Window tabs
set -g window-status-format "#[fg=#6c7086] #I:#W "
set -g window-status-current-format "#[fg=#1e1e2e,bg=#a6e3a1,bold] #I:#W #[fg=#a6e3a1,bg=#1e1e2e]"
set -g window-status-separator ""

# Right: git branch, directory, time
set -g status-right "#[fg=#f9e2af]#(cd #{pane_current_path}; git branch --show-current 2>/dev/null) #[fg=#6c7086]│ #[fg=#cba6f7]#{pane_current_path} #[fg=#6c7086]│ #[fg=#89b4fa]%H:%M "

# Pane borders
set -g pane-border-style "fg=#313244"
set -g pane-active-border-style "fg=#89b4fa"

# Reduce escape time for better Neovim experience
set -sg escape-time 10

